| Step | Question                                           | Answer (for `coupons` table)                                                                   | Index Deduced                                                                                  |
| ---- | -------------------------------------------------- | ---------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| 1    | What queries are used most?                        | Active & valid coupons, redeem by `code`, filter by doctor, eligibility checks                 | `idx_active_valid_coupon`, `idx_coupon_code`, `idx_doctor_user_id`, `idx_apply_on_all_doctors` |
| 2    | What fields are filtered, joined, or ordered on?   | `status`, `start_date`, `end_date`, `code`, `doctor_user_id`, `apply_on_all_doctors`           | (same as above) + `idx_min_purchase_discount`                                                  |
| 3    | Are those fields selective and frequently used?    | Yes: `code`, `doctor_user_id`, `minimum_purchase_of` are selective and commonly filtered       | Keep all deduced indexes                                                                       |
| 4    | Can I make composite indexes for combined filters? | Yes: status+date, status+doctor, minPurchase+discount                                          | `idx_active_valid_coupon`, `idx_status_doctor`, `idx_min_purchase_discount`                    |
| 5    | Are there unique or lookup fields?                 | Yes: `code` is used for redemption                                                             | `idx_coupon_code` (UNIQUE)                                                                     |
| 6    | Can I design a covering index?                     | Yes: for redemption with selected fields                                                       | `idx_cover_redeem_coupon`                                                                      |
| 7    | Are any indexes redundant or unused?               | Yes: `idx_doctor_id` (redundant), `idx_patient_user_id` (invalid), `idx_updated_at` (optional) | Drop: `idx_doctor_id`, `idx_patient_user_id`, optionally `idx_updated_at`                      |
| 8    | Do I care more about read or write performance?    | Read-heavy: user validations, redemptions, filters                                             | âœ… Safe to keep all useful indexes                                                             |
